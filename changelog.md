# v2.0.0 [WIP]

> [!CAUTION]
> Из-за изменений в аргументах совместимость со скриптами для версии 1.х может быть нарушена. Подробнее о миграции читайте в [UPGRADING.md](UPGRADING.md)

VOT CLI был полностью переписан с нуля с использованием TypeScript и библиотеки [vot.js](https://github.com/FOSWLY/vot.js). В этой версии была улучшена производительность, увеличен список поддерживаемых веб-сайтов, сделаны важные исправления в запросах, а так же была добавлена возможность загрузки переведенного видео без необходимости использовать дополнительные скрипты.

### Изменения

- Теперь, скрипт по умолчанию загружает аудио, если передана ссылка на видео. Для того, чтобы вернуть полученную ссылку на аудио дорожку перевода, без загрузки аудио, был добавлен аргумент `preview`
- Значительно расширен список поддерживаемых веб-сайтов, а так же увеличена дальнейшая скорость выхода обновлений, благодаря переходу на библиотеку [vot.js](https://github.com/FOSWLY/vot.js)
- Добавлена возможность сборки скрипта в виде исполняемых файлов для Windows, Linux или MacOS
- Добавлен аргумент `no-visual` для вывода только в stdout/stderr без информации о прогрессе (#39)
- Добавлен аргумент `old-model` для получения перевода с использованием старой версии голосов. По умолчанию используется "новая модель" яндекса, которая генерирует немного другие голоса для некоторых видео (#41)
- Добавлен аргумент `subs-format`, с помощью которого можно установить удобный формат для загружаемых субтитров (`json`, `srt`, `vtt`). Не совместимо с `--preview`
- Добавлен аргумент `worker-host`, с помощью которого можно задать свой [прокси-воркер](https://github.com/FOSWLY/vot-worker)
- Добавлен аргумент `vot-host`, с помощью которого можно задать свой [дополнительный бекенд сервер для расширения списка поддерживаемых сайтов](https://github.com/FOSWLY/vot-backend)
- Аргумент `output` был заменен на `outdir`, а так же обзавелся новыми алиасами `out` и `o`
- Аргумент `output-file` был заменен на `outfile`
- Удален аргумент `force-proxy`
- Удален аргумент `subs-srt`
- Улучшена логика работы с аргументами

# v1.4.3

- Добавлена поддержка загрузки субтитров в `.srt` (#33)

# v1.4.2

- Добавлена поддержка /live/ для YouTube (#32)

# v1.4.1

- Обновлен Yandex HMAC

# v1.4.0

- Добавлен новый аргумент `--output-file`. Он позволяет установить имя файла для сохранения (требует указания пути сохранения аудио файла перевода в аргументе "--output")
- `Yandex Protobuf` обновлен до актуальной версии из [voice-over-translation](https://github.com/ilyhalight/voice-over-translation)
- Добавлена поддержка перевода Google Drive (только публичные ссылки, например: `https://drive.google.com/file/d/FILE_ID`)
- Добавлена поддержка перевода YouTube Shorts (`https://youtube.com/shorts/VIDEO_ID`)
- Добавлена поддержка короткой ссылки на YouTube `youtu.be`

# v1.3.1

- Добавлена поддержка короткой ссылки на yandex disk (`yadi.sk`)

# v1.3.0

- Добавлена поддержка кастомных ссылок с окончанием на `.mp4`
- Добавлена поддержка Одноклассников (`ok.ru`)
- Добавлена поддержка Peertube. Были добавлены 9 крупных сайтов, хостящих Peertube (libre.video не поддерживается - не просите):

  - `tube.shanti.cafe`
  - `bee-tube.fr`
  - `video.sadmin.io`
  - `dalek.zone`
  - `review.peertube.biz`
  - `peervideo.club`
  - `tube.la-dina.net`
  - `peertube.tmp.rcp.tf`

- Добавлена поддержка Dailymotion (`dailymotion.com/video/`)
- Добавлена поддержка Trovo (`trovo.live/s/`)
- Добавлена поддержка Яндекс Диск (`disk.yandex.ru/i/`)
- Добавлена поддержка Coursehunter (`coursehunter.net/course/`). Для перевода конкретного урока используйте query-параметр `?lesson=НОМЕР_УРОКА`
- Минимальная версия NodeJS в NPM пакете зафиксирована на **NodeJS 18**
- Добавлена эксперементальная поддержка HTTP и HTTPS прокси в формате `[<PROTOCOL>://]<USERNAME>:<PASSWORD>@<HOST>[:<port>]` (например: `http://127.0.0.1:8788`). Для установки прокси используйте аргумент `--proxy`

# v1.2.1

- Еще один фикс загрузки #4

# v1.2.0

- Добавлена возможность загрузки субтитров для видео вместо озвучки (используйте опцию `--subs` или `--subtitles`)
- Добавлена поддержка Rumble и EPorner (у последнего перевод занимает очень много времени)
- Фикс загрузки аудио файла для XVideos (#4)
- Актуализирован список языков доступных для TTS (уменьшен до 3 - ru, kk, en)
- `Yandex Protobuf` обновлен до актуальной версии из [voice-over-translation](https://github.com/ilyhalight/voice-over-translation)
- Добавлен хук pre-commit для автоформатирования при добавление в git
- Игнорирование папок перенесено в отдельный файл `.eslintignore`
- Задан явный конфиг для prettier (нужен для нормальной работы форматирования в редакторе)

# v1.1.1

- Возвращен показ ссылки на перевод

# v1.1.0

- Добавлены тесты для ютуба и вимео
- Улучшена работа одновременного перевода нескольких видео
- Теперь, имя аудио файла начинается с айди видео и имеет вид: "**VIDEO_ID---UUID4**"
- Добавлено отображение процентов загрузки аудио
- Возвращен слайдер при ожидание перевода
- Библиотека `node-downloader-helper` заменена асинхронной реализацией с `axios` и `fs`
- Библиотека `loading-cli` была заменена на `listr2`
- Немного изменена реализация функции `translate` для избежания ошибок при загрузке перевода сразу нескольких видео
- Добавлены новые аргументы:
  - `--lang` для установки языка исходного видео (см. вики, чтобы узнать какие языки поддерживаются)
  - `--reslang` для установки языка переведенной аудио дорожки (см. вики, чтобы узнать какие языки поддерживаются)
- Добавлены сокращенные версии опций: `--help` => `-h` и `--version` => `-v`
- Улучшена документация `vot-cli --help`
- Улучшена документация README.md
- Функция `getVideoId` обновлена до актуальной версии из [voice-over-translation](https://github.com/ilyhalight/voice-over-translation)
  - Добавлена поддержка Bitchute, Invidious, ProxyTok, Piped, Bilibili, Twitch Clips, Rutube
- `Yandex Protobuf` обновлен до актуальной версии из [voice-over-translation](https://github.com/ilyhalight/voice-over-translation)
- Все зависимости были обновлены до последних версий
- Почищены не используемые зависимости
- Добавлены prettier и eslint
- Изменена структура проекта. Теперь, все файлы, относящиеся к скрипту, находятся в папке `src`. Так же, теперь, часть функций была вынесена в отдельные файлы.
- vot-cli был перенесен в отдельный [репозиторий](https://github.com/FOSWLY/vot-cli)

# v1.0.4

- Добавлена поддержка mail.ru

# v1.0.3

- Добавлена поддержка Twitter

# v1.0.2

- Различные фиксы

# v1.0.1

- Добавлена поддержка Vimeo
- Добавлена поддержка 9GAG

# v1.0.0.

- Был создана сам VOT-CLI с доступными запросами к YouTube, Twitch, VK, XVideos, Pornhub
